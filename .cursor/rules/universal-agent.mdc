name: universal-agent
alwaysApply: true
description: Global operating rules for ArchBuilder.AI in Cursor
---
# Universal Agent Rules (ArchBuilder.AI)

- Rehydrate context from `.mds/context/current-context.md` and `docs/registry/*.json` before coding.
- Keep replies kısa ve aksiyon odaklı (TR); kod/identifier İngilizce; yorum/log Türkçe; UI metinleri i18n.
- Registry-first: public contract değişince `docs/registry/*.json` güncelle, en az bir test ekle.
- Vibe cadence: Her 2 promptta `version.md` ekle (PowerShell timestamp). Tercihen `scripts/run-vibe-coding.ps1` kullan.
- Güvenlik: Secrets asla koda; `.env.example` ile dokümante et.
- Hata/geri dönüş: Küçük dilimler; CI yeşil olmadan merge yok.

## Mandatory Development Workflow (Cursor)

1) Git Branch Workflow
- Her iş için feature branch aç; master'dan güncel al, açıklayıcı branch adı kullan
- Conventional Commits ile commit et; PR aç, doğrudan master'a merge etme

2) Before ANY Code Change
- İlgili `.github/instructions/*.instructions.md` dosyalarını oku ve uygula
- Rehydrate: `docs/registry/*.json` + `.mds/context/current-context.md`

3) Import/Deps Checks (Cloud Server)
- `python -m py_compile path/to/file.py`
- `pip check`; eksik paketleri ekle ve `requirements.txt` güncelle

4) Documentation Process
- Yeni/önemli modüller için `docs/` altında md ekle/güncelle (TR kullanıcı, EN teknik)
- Registry-first: identifiers/endpoints/schemas JSON'larını güncel tut

5) Versioning Cadence
- Her 2 promptta `version.md` ekle (PowerShell stamp)
- `scripts/run-vibe-coding.ps1` kullanımı tercih edilir (clipboard + logs + auto-update)

6) Language & Output Policy
- Kod/identifier: EN; yorum/log: TR; UI metinleri i18n (EN varsayılan, TR opsiyonel)
- Sohbet yanıtı: TR, kısa ve aksiyon odaklı

7) Quality Gates
- Lint/format + unit/integration + smoke/e2e yeşil olmadan sevkiyat yok; rollback adımları sağla

8) Security Defaults
- Girdi doğrulama, çıktı sanitizasyonu, authn/authz; secrets asla koda; `.env.example` ile dokümante et

9) Provider/Stack Notes
- OpenAI/Azure OpenAI ve Vertex AI isimlendirmesini doğru kullan; taban URL'leri ve yetkilendirme akışları doğru olmalı
- Cloud Python hedefi: 3.12; Revit Plugin: .NET Framework 4.8 (Revit 2026 destek durumuna göre not et)

10) API Base URL
- Production base URL: `https://api.archbuilder.app/v1`
